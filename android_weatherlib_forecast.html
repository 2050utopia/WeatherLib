
<html>
  
    <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="" />
	<meta content='android weather, weather api,code,source,weather,weather library,yahoo! weather, weatherunderground,api,android weather,android app,open source library' name='keywords'/>
	<meta content='https://plus.google.com/111119552788205366558' name='author'/>
	<meta content='https://plus.google.com/111119552788205366558' name='publisher'/>

    <meta name="google-site-verification" content="2gOcYkpKozlNli7dQdtWHFue5qWjPw7YCynvKKb9Xkk" />

	<link rel="stylesheet" href="./css/bootstrap-combined.min.css">
	<link rel="stylesheet" href="./css/site.css">
	<link rel="stylesheet" href="./css/bjqs.css">
	<link href="http://fonts.googleapis.com/css?family=Roboto:400,300italic,100,100italic,300" rel="stylesheet" type="text/css">

	<script src="./javascripts/jquery-1.7.1.min.js"></script>
    <script src="./javascripts/bjqs-1.3.min.js"></script>
	<script src="./javascripts/jquery.smooth-scroll.min.js"></script>
    <title>Android Weatherlib Forecast</title>
  </head>


   <body data-target=".content-nav" >


    <header style="background-color:#3F51B5">
    
    <ul class="nav nav-pills" style="background:#FFFFFF; width:100%">
  <li role="presentation"><a href="./index.html">Home</a></li>
  <li role="presentation"><a href="./android_weatherlib_start.html">Getting started</a></li>
  <li role="presentation"><a href="./android_weatherlib_search_city.html">Documentation</a></li>
  <li role="presentation"><a href="./javadoc/index.html">Javadoc</a></li>
  
  
</ul>

      <div class="container" >

        <div class="row"  >
		  <div class="span1" style="margin-top:5px">
			<a href="https://plus.google.com/communities/117946761543584564970" target="_blank"><img class="img-circle" src="images/weatherlib_icon.png" alt="Weather library"/></a>
		  </div>

          <div class="span5">		    
            <h1 style="text-shadow: 2px 2px 2px rgba(150, 150, 150, 1);">Weatherlib <br/> <font style="font-size:large; font-style:italic;">Forecast</font></h1> 
          </div>
          <div class="span6">
            <menu>
              <ul>
                <li><a href="#starthere" class="menu download">Latest version <strong>1.5.4</strong></a></li>
                <li><a href="https://github.com/survivingwithandroid/WeatherLib" data-title="View GitHub Project" class="menu github"><img src="images/icon-github.png" alt="GitHub"/></a>
               </li> 
               </ul>
            </menu>
          </div>
          
      </div>

    </header>



<section id="body">
<div class="container">
<div class="row">
<div class="span12"> 
<br/><br/></br/><h2>Introduction</h2>
In this paragraph we will see how to get forecast.
We can get <em>weather forecast in android</em> in two different ways:
<ul>
 <li>Next days forecast</li>
 <li>Hourly forecast</li>
</ul>
<br/>
<em>Weatherlib</em> supports both type of request.
As told before, you have to use <em>WeatherRequest</em> to get weather forecast.
</br>
The <em>Daily forecast</em> features is supported by:<br/><br/>

    <table class="table_support">
      <tr> 
        <td><strong>Openweathermap</strong></td>
        <td><font class="ok_support">Yes</font></td>
      </tr>
      <tr>
        <td><strong>Weatherunderground<br/>Weather.com</strong></td>
         <td><font class="ok_support">Yes</font></td>
      </tr>
      <tr>
        <td><strong>Yahoo! Weather</strong></td>
        <td><font class="ok_support">Yes</font></td>
      </tr>
      <tr>
        <td><strong>Forecast.io</strong></td>
         <td><font class="ok_support">Yes</font></td>
      </tr>
    </table>

<br/>
<br/>
The <em>Hourly forecast</em> features is supported by:<br/><br/>
    <table class="table_support">
      <tr> 
        <td><strong>Openweathermap</strong></td>
        <td><font class="ok_support">Yes</font></td>
      </tr>
      <tr>
        <td><strong>Weatherunderground<br/>Weather.com</strong></td>
         <td><font class="ok_support">Yes</font></td>
      </tr>
      <tr>
        <td><strong>Yahoo! Weather</strong></td>
        <td><font class="ok_support">Yes</font></td>
      </tr>
      <tr>
        <td><strong>Forecast.io</strong></td>
         <td><font class="ok_support">Yes</font></td>
      </tr>
    </table>
<br/>
<br/>
<h2>Daily weather forecast</h2>
Let us suppose we retrieved already the <em>city id</em> retrieved using <strong>search city</strong>.
<br/>
The code is very simple:<br/>
<pre class="pretyprint">
       weatherClient.getForecastWeather(new WeatherRequest(cityId), new WeatherClient.ForecastWeatherEventListener() {
            @Override
            public void onWeatherRetrieved(WeatherForecast forecast) {
                // Data is ready
            }

            @Override
            public void onWeatherError(WeatherLibException t) {

            }

            @Override
            public void onConnectionError(Throwable t) {
                //WeatherDialog.createErrorDialog("Error parsing data. Please try again", MainActivity.this);
            }
        });
    }
</pre>
<br/>
Once the data is ready, we can handle it. <em>WeatherForecast</em> holds the <strong>weather forecast</strong> represented as
an <em>java List</em>.<br/>
So we have:<br/>
<pre class="prettyprint">
List<DayForecast> dayForecastList = forecast.getForecast();
</pre>
<br/>
Now we can traverse the <m>List</em>:
<br/>
<pre class="prettyprint">
for (DayForecast dForecast : dayForecastList) {
    Weather weather = dForecast.weather;
    long timestamp = dForecast.timestamp;
}
</pre>
<br/>
where the <strong>Weather</strong> class represents the weather in they day specified by the timestamp. In the <em>onWeatherRetrieved</em>
we can instantiate an <strong>Android custom adapter</strong> and fill a <em>Android Listview</em>.

<h2>Hourly forecast</h2>
The <em>hourly forecast</em> is used in the same way we used the day forecast.<br/>
<pre class="prettyprint">
       weatherClient.getHourForecastWeather(new WeatherRequest(cityId), new WeatherClient.HourForecastWeatherEventListener() {
            @Override
            public void onWeatherRetrieved(WeatherHourForecast weatherHourForecast) {
                List<HourForecast> hourList = weatherHourForecast.getHourForecast();
                for (HourForecast hourForecast: hourList) {
                    Weather weather = hourForecast.weather;
                    long timestamp = hourForecast.timestamp;
                }
            }

            @Override
            public void onWeatherError(WeatherLibException e) {

            }

            @Override
            public void onConnectionError(Throwable throwable) {

            }
        });
 </pre>
  </div>
</div>
</div>
<div>
<div class="row">
<div class="span12">&nbsp;</div>
</div>
</div>
<!-- Add next and back -->
<div class="row" style="height: 80px;">
<ul class="pager">
  <li><a href="./android_weatherlib_current_weather.html">Get current weather</a></li>
  <li><a href="./android_weatherlib_historical_weather.html">Historical weather</a></li>
</ul>
</div>
<div>
<div class="row">
<div class="span12">&nbsp;</div>
</div>
</div>
	<div class="container" style="width:100%; padding-left:10px; padding-right:10px;">
	<footer style="width:100%">
	<div class="row" style="background:#BBDEFB;">
		<span class="12">
			<center><h6>Project maintained by Francesco Azzola</h6></center>
		</span>
	</div>
	<div class="row" style="background:#BBDEFB;">

		<div class="span3">
			<h4>Info</h4>
			<ul>
			  <li><a href="mailto:survivingwithandroid@gmail.com">Contact me</a></li>
			  <li><a href="https://github.com/survivingwithandroid">My Github Projects</a></li>
			  <li><a href="https://github.com/survivingwithandroid/WeatherLib/wiki/Tutorial">Wiki</a></li>
			</ul>

		</div>
		<div class="span3">
			<h4>Social</h4>
			<ul>
			  <li><a href="http://plus.google.com/+FrancescoAzzola" target="_blank">Follow me</a></li>
			  <li><a href="https://plus.google.com/communities/117946761543584564970">Join the G+ Weather community</a></li>
			  <li><a href="http://it.linkedin.com/in/francescoazzola">Linkedin profile</a></li>
			</ul>

		</div>
		<div class="span3">
			<h4>Useful links</h4>
			<ul>
			  <li><a href="http://openweathermap.org/" target="_blank">Openweathermap</a></li>
			  <li><a href="https://developer.yahoo.com/weather/" target="_blank">Yahoo! Weather</a></li>
			  <li><a href="http://www.wunderground.com/weather/api/" target="_blank">Weather underground</a></li>
			  <li><a href="http://forecast.io/" target="_blank">Forecast.io</a></li>
			</ul>
		</div>	
		<div class="span2">
			<h4>Blog</h4>
			<ul>
			  <li><a href="http://www.survivingwithandroid.com" target="_blank">Surviving with android blog</a></li>
			</ul>
		</div>	
		<div class="span1">
Master <a href="https://travis-ci.org/survivingwithandroid/WeatherLib" >
    <img src="https://travis-ci.org/survivingwithandroid/WeatherLib.svg?branch=master" alt="Master status">
  </div>
    </div>	
	</footer>
	</div> </div>
</section>
</body>
</html>
